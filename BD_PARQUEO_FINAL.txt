create database BD_PARQUEO2;

use BD_PARQUEO2;


create table LUGAR_PARQUEO(
ID_PARQUEO	INT NOT NULL IDENTITY PRIMARY KEY,
NOMBRE_PARQUEO VARCHAR(40) NOT NULL,
DESCRIPCION_D_PARQUEO VARCHAR(150) NOT NULL
);
 
CREATE TABLE CLIENTE(
	ID_CLIENTE int NOT NULL IDENTITY PRIMARY KEY,
	NOMBRE_CLIENTE VARCHAR(30) NOT NULL,
	VEHICULO VARCHAR(30) NOT NULL,
	NUM_PLACA VARCHAR(14) NULL,
	ID_PARQUEO INT NOT NULL FOREIGN KEY REFERENCES LUGAR_PARQUEO(ID_PARQUEO)
);


drop table ticket;

CREATE TABLE TICKET(
ID_TICKET INT NOT NULL IDENTITY PRIMARY KEY,
ID_CLIENTE INT NOT NULL FOREIGN KEY REFERENCES CLIENTE(ID_CLIENTE),
ID_PARQUEO INT NOT NULL FOREIGN KEY REFERENCES LUGAR_PARQUEO(ID_PARQUEO),
TIPO_TICKET VARCHAR(10) NOT NULL CHECK (TIPO_TICKET IN('Hora', 'Fraccion')),
FECHA SmallDateTime NOT NULL,
TIEMPO_PARQUEO  NUMERIC(8,2) NOT NULL DEFAULT 0,
COSTO_FINAL SMALLMONEY NOT NULL
);

CREATE TABLE ROLES(
ID_ROL INT NOT NULL IDENTITY PRIMARY KEY,
ROL VARCHAR(30)
);

CREATE TABLE USUARIO(
ID_USUARIO INT NOT NULL IDENTITY PRIMARY KEY,
ID_ROL INT NOT NULL FOREIGN KEY REFERENCES ROLES(ID_ROL),
USUARIO VARCHAR(30),
PASSWORD NVARCHAR(30)
);


SELECT * FROM LUGAR_PARQUEO;
INSERT INTO LUGAR_PARQUEO VALUES('Parqueo Veterinaria', 'Parqueo de la Facultad Veterinaria ');
INSERT INTO LUGAR_PARQUEO VALUES('Parqueo Anexo', 'Parqueo Sur de la Univeridad');
INSERT INTO LUGAR_PARQUEO VALUES('Parqueo NVL 3','Entrada Oeste de la Universidad');

SELECT * FROM CLIENTE;
INSERT INTO CLIENTE VALUES('DIEGO ALVARADO','NISSAN SENTRA', 'P654-012',1);
INSERT INTO CLIENTE VALUES('VICTOR VALENZUELA','NISSAN SENTRA', 'P898-698',1);
INSERT INTO CLIENTE VALUES('SALVADOR SALAZAR','NISSAN SENTRA', 'P856-874',1);
INSERT INTO CLIENTE VALUES('MARIO SOLORZANO','NISSAN SENTRA', 'P412-074',1);

SELECT * FROM USUARIO;
INSERT INTO USUARIO VALUES(1,'ADMIN', 'ADMIN');

SELECT * FROM TICKET;
INSERT INTO TICKET VALUES(1,1,'Hora','11-06-2021','12:32:01.123',,'1.00');
INSERT INTO TICKET VALUES(2,2,'Hora','11-06-2021','10:00:00.000',,'1.00');
INSERT INTO TICKET VALUES(3,1,'Hora','11-06-2021','12:00:01.123',,'1.00');
INSERT INTO TICKET VALUES(4,3,'Hora','11-06-2021','08:30:59.021',,'1.00');
INSERT INTO TICKET VALUES(2,3,'Hora',getdate(),0,'1.00');

